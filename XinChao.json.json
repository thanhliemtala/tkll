{"mode":"block","xmlText":"<xml xmlns=\"https://developers.google.com/blockly/xml\"><variables><variable id=\")Ke}[z[[8q2ddvML~!b)\">gio</variable><variable id=\"tSKf+w.n{+F3+b?2jp~6\">den</variable><variable id=\"Ak)J(,t,i6DWUNc),Sn6\">quat</variable><variable id=\"D.S_vDVpe-|D[D@;+I0w\">tin nhan</variable></variables><block type=\"yolobit_events_timer\" id=\"-K/yk`bm^X4;qJ@M4I?e\" x=\"662\" y=\"-562\"><value name=\"INTERVAL\"><shadow type=\"math_number\" id=\"o*K?jU19d(feUKXpq#e,\"><field name=\"NUM\">20</field></shadow></value><statement name=\"ACTION\"><block type=\"yolobit_mqtt_publish\" id=\"e]/PJ@TBKFy~|AG/W0lZ\"><value name=\"MESSAGE\"><shadow type=\"text\" id=\"w+%7?Y9vT9NPRM({]J.Y\"><field name=\"TEXT\">Hello</field></shadow><block type=\"aiot_dht_read\" id=\"TO2]?vP(Y-/YF}hA:NKB\"><field name=\"DATA\">TEMP</field></block></value><value name=\"TOPIC\"><shadow type=\"text\" id=\"GNy#gS}G?GhVp|W~EH^]\"><field name=\"TEXT\">cambien1</field></shadow></value><next><block type=\"yolobit_mqtt_publish\" id=\")-,%):}.;dE|1IjUis24\"><value name=\"MESSAGE\"><shadow type=\"text\" id=\"wyS1NoMVp{uvj8#HylW)\"><field name=\"TEXT\">Hello</field></shadow><block type=\"aiot_light_sensor\" id=\"}j^Mr]]Oc@x:Y:N|k}fC\"><field name=\"NAME\">pin2</field></block></value><value name=\"TOPIC\"><shadow type=\"text\" id=\"Xq_sK]u4=}-0wOXefDVC\"><field name=\"TEXT\">cambien2</field></shadow></value><next><block type=\"yolobit_mqtt_publish\" id=\"$FZGMJO7IdUn%_`5f,^P\"><value name=\"MESSAGE\"><shadow type=\"text\" id=\"fVb*~5%yX-77`kl.J-fS\"><field name=\"TEXT\">Hello</field></shadow><block type=\"aiot_soil_sensor\" id=\"a]2+ji=7|6;-g4/=e!Bz\"><field name=\"NAME\">pin0</field></block></value><value name=\"TOPIC\"><shadow type=\"text\" id=\"Xm$!Yx.JJixDFjY~;!jM\"><field name=\"TEXT\">cambien3</field></shadow></value></block></next></block></next></block></statement></block><block type=\"procedures_defnoreturn\" id=\"p52QDuHusr*Hb0*eBtk(\" x=\"1237\" y=\"-337\"><field name=\"NAME\">Sever</field><comment pinned=\"false\" h=\"80\" w=\"160\">Mô tả hàm này...</comment><statement name=\"STACK\"><block type=\"yolobit_mqtt_on_receive_message\" id=\"e:x^EtD@0agi(lBCLX6C\"><field name=\"message\" id=\"tSKf+w.n{+F3+b?2jp~6\">den</field><value name=\"TOPIC\"><shadow type=\"text\" id=\"5M)HQn8~IJuK(e%S|=l_\"><field name=\"TEXT\">button1</field></shadow></value><statement name=\"ACTION\"><block type=\"controls_if\" id=\"#g%L06_GxUxmHh({I})l\"><mutation else=\"1\"></mutation><value name=\"IF0\"><block type=\"logic_compare\" id=\"%SwOyfP!XxT}wT6MX!5P\"><field name=\"OP\">EQ</field><value name=\"A\"><block type=\"variables_get\" id=\"G@l-.:OcnF|2uKz}a`4Q\"><field name=\"VAR\" id=\"tSKf+w.n{+F3+b?2jp~6\">den</field></block></value><value name=\"B\"><block type=\"text\" id=\".8ogJfTRDMoBIlx=e50M\"><field name=\"TEXT\">1</field></block></value></block></value><statement name=\"DO0\"><block type=\"yolobit_led_set_all\" id=\"@F,FKEuHa}L]kR27.6jK\"><value name=\"COLOR\"><shadow type=\"colour_picker\" id=\"JMA2YqV2d@VT)WgG8VIF\"><field name=\"COLOUR\">#ff0000</field></shadow></value><next><block type=\"aiot_lcd1602_display\" id=\"f@ap)?bY=i~P;ug@86YA\"><value name=\"string\"><shadow type=\"text\" id=\"Pyt3^Dck`~Tfht|U9%vf\"><field name=\"TEXT\">Bat den</field></shadow></value><value name=\"X\"><shadow type=\"math_number\" id=\"^wGa-{(|i6v|g9Ayuqm!\"><field name=\"NUM\">5</field></shadow></value><value name=\"Y\"><shadow type=\"math_number\" id=\"KOF(Zm{vHi.eo|[NotDu\"><field name=\"NUM\">1</field></shadow></value></block></next></block></statement><statement name=\"ELSE\"><block type=\"yolobit_led_set_all\" id=\"4OL*IfeXD.a+4Ly?,wx[\"><value name=\"COLOR\"><shadow type=\"colour_picker\" id=\"9oViR{Tu!h=Qh^C6j9=g\"><field name=\"COLOUR\">#000000</field></shadow></value><next><block type=\"aiot_lcd1602_display\" id=\"{g9e?}xg0]c#zk;V~[y,\"><value name=\"string\"><shadow type=\"text\" id=\"nBy#oU0hRgi|cD}OM/JQ\"><field name=\"TEXT\">Tat den</field></shadow></value><value name=\"X\"><shadow type=\"math_number\" id=\"TTsM)n:7|yzHRQyKAbxS\"><field name=\"NUM\">5</field></shadow></value><value name=\"Y\"><shadow type=\"math_number\" id=\"GrQzy]$vVx6@*Z`|GF5#\"><field name=\"NUM\">1</field></shadow></value></block></next></block></statement></block></statement><next><block type=\"yolobit_mqtt_on_receive_message\" id=\"7bX!xmgN`t:V~[+c?T7R\"><field name=\"message\" id=\"Ak)J(,t,i6DWUNc),Sn6\">quat</field><value name=\"TOPIC\"><shadow type=\"text\" id=\"53YZZ(c2-..]FZ},;ZsZ\"><field name=\"TEXT\">button2</field></shadow></value><statement name=\"ACTION\"><block type=\"aiot_minifan\" id=\"lL5mvF~v`ZkPg5!ifGs%\"><field name=\"NAME\">pin10</field><value name=\"percent\"><shadow type=\"math_number\" id=\":$6mla+;^ZYflC@skAOX\"><field name=\"NUM\">70</field></shadow><block type=\"math_arithmetic\" id=\"Dh1Z^)k2C.j{O-XCe?yQ\"><field name=\"OP\">MULTIPLY</field><value name=\"A\"><shadow type=\"math_number\" id=\"P!jG^XF3xfXK^0QC#6QB\"><field name=\"NUM\">1</field></shadow><block type=\"math_tonum\" id=\"^89Crqgtb1oJ-)i0uq!^\"><value name=\"A\"><block type=\"variables_get\" id=\"%v=@dN3-%cF4O*7=T~?)\"><field name=\"VAR\" id=\"Ak)J(,t,i6DWUNc),Sn6\">quat</field></block></value></block></value><value name=\"B\"><shadow type=\"math_number\" id=\"BDO8@b!/onfx7,058om-\"><field name=\"NUM\">33.33</field></shadow></value></block></value><next><block type=\"controls_if\" id=\"V{74wqfiCqZd2{*k7oS.\"><mutation else=\"1\"></mutation><value name=\"IF0\"><block type=\"logic_compare\" id=\"C*#K0c`/lf_fQ3!XYK-0\"><field name=\"OP\">EQ</field><value name=\"A\"><block type=\"variables_get\" id=\"*?^=q?lP?i}h0lh}Kcgn\"><field name=\"VAR\" id=\"Ak)J(,t,i6DWUNc),Sn6\">quat</field></block></value><value name=\"B\"><block type=\"text\" id=\"-}ep7LlNOv=]pu].C=Kp\"><field name=\"TEXT\">0</field></block></value></block></value><statement name=\"DO0\"><block type=\"aiot_lcd1602_display\" id=\"Slx.nWb)LEJ{f[]*HqTe\"><value name=\"string\"><shadow type=\"text\" id=\"qWg$Nx2u((M}DdV]j$Cm\"><field name=\"TEXT\">Tat quat</field></shadow></value><value name=\"X\"><shadow type=\"math_number\" id=\"st@2IQy{vxmTcb;b`,[z\"><field name=\"NUM\">5</field></shadow></value><value name=\"Y\"><shadow type=\"math_number\" id=\"a^8-/Uma=ZvG8D+^QFY*\"><field name=\"NUM\">1</field></shadow></value></block></statement><statement name=\"ELSE\"><block type=\"aiot_lcd1602_display\" id=\"}+$=9@Z4z]9Y??kxnNG(\"><value name=\"string\"><shadow type=\"text\" id=\"C5Mm+5?j%}[kGGGRp|Ep\"><field name=\"TEXT\">Bat quat</field></shadow></value><value name=\"X\"><shadow type=\"math_number\" id=\"y-s4k+O)43e(+Ghlxo7E\"><field name=\"NUM\">5</field></shadow></value><value name=\"Y\"><shadow type=\"math_number\" id=\"(Pj9v-{o3=OG8/}.u%|W\"><field name=\"NUM\">1</field></shadow></value></block></statement></block></next></block></statement><next><block type=\"yolobit_mqtt_on_receive_message\" id=\"g?-@h%!^T,K67fY(2Vju\"><field name=\"message\" id=\"D.S_vDVpe-|D[D@;+I0w\">tin nhan</field><value name=\"TOPIC\"><shadow type=\"text\" id=\"nOV?FzBuc4qaZIIA^Jb~\"><field name=\"TEXT\">topic</field></shadow></value></block></next></block></next></block></statement></block><block type=\"yolobit_basic_forever\" id=\"w5Bl*-!,Ihc8X2tI)wP*\" x=\"213\" y=\"-263\"><statement name=\"ONSTART\"><block type=\"yolobit_ntp_connect_wifi\" id=\",gjeixa0B[72JBhQHfgQ\"><value name=\"WIFI\"><shadow type=\"text\" id=\"a+,kSaMCApB(9rheCXMW\"><field name=\"TEXT\">thanhliem</field></shadow></value><value name=\"PASSWORD\"><shadow type=\"text\" id=\"bMsqi?LafyF~C3MCJ{kj\"><field name=\"TEXT\">liemnguyen</field></shadow></value><next><block type=\"set_time\" id=\"`yISsDh1$H4@,NLYmvwp\"><field name=\"GMT\">+7</field><next><block type=\"yolobit_mqtt_connect_wifi\" id=\"H!-CvYZt?x+nMZa@uU[F\"><value name=\"WIFI\"><shadow type=\"text\" id=\"jvcHsp;|AL`#opxaTnpf\"><field name=\"TEXT\">thanhliem</field></shadow></value><value name=\"PASSWORD\"><shadow type=\"text\" id=\"#EeN-*yM2y9itN/x$hZb\"><field name=\"TEXT\">liemnguyen</field></shadow></value><next><block type=\"yolobit_mqtt_connect_default_servers\" id=\"Uc3cm7TJf]F)H5Q!RH|O\" disabled=\"true\"><field name=\"SERVER\">mqtt.ohstem.vn</field><value name=\"USERNAME\"><shadow type=\"text\" id=\"./s}X+%(.oD)(rn]4tr%\"><field name=\"TEXT\">Test 231 tkll</field></shadow></value><value name=\"KEY\"><shadow type=\"text\" id=\"x(H9Q~Xv5}fx*{Yjq8ax\"><field name=\"TEXT\"></field></shadow></value><next><block type=\"yolobit_mqtt_connect_default_servers\" id=\"W.+D68N{5_9d1Sqo^mEp\"><field name=\"SERVER\">io.adafruit.com</field><value name=\"USERNAME\"><shadow type=\"text\" id=\"DvOTtcx^aC[l#54[xC?d\"><field name=\"TEXT\">thanhliemtala</field></shadow></value><value name=\"KEY\"><shadow type=\"text\" id=\"x((KEuT~_@tAU^PLY%_X\"><field name=\"TEXT\">aio_gyUv68VsDq0FC34RFu99SsYdcfEz</field></shadow></value><next><block type=\"yolobit_basic_scroll_text\" id=\"+#o*12Fs*7ewXM^)j{Xi\"><value name=\"message\"><shadow type=\"text\" id=\"6e1{d-r?]GGk?.#8yki`\"><field name=\"TEXT\">OK</field></shadow></value><next><block type=\"aiot_lcd1602_backlight\" id=\"qnifcsD?ky^CD,Qs.O_9\"><field name=\"action\">on</field><next><block type=\"yolobit_mqtt_check_message\" id=\"P~o4}B2/T*,St.X~Th8`\"><next><block type=\"procedures_callnoreturn\" id=\"!/`S:`Ow9V+8UtXh{g8I\"><mutation name=\"Sever\"></mutation></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement><statement name=\"FOREVER\"><block type=\"yolobit_mqtt_check_message\" id=\"??}lX}ScB#n|#~9YMvq{\"><next><block type=\"aiot_dht_measure\" id=\"70G?enN,(/MSc^qLi0uu\"><next><block type=\"aiot_lcd1602_display\" id=\"jG6F1L;o{`wARi3a4x01\"><value name=\"string\"><shadow type=\"text\" id=\"JHU7ZR_kx|gQqc64^jK#\"><field name=\"TEXT\">Hello</field></shadow><block type=\"get_time\" id=\"k/Q;1W8eHV:1,7Bz8xqH\"><field name=\"get_time\">4</field></block></value><value name=\"X\"><shadow type=\"math_number\" id=\"qEm*Fzqm|Zy$=KQ!^i2:\"><field name=\"NUM\">0</field></shadow></value><value name=\"Y\"><shadow type=\"math_number\" id=\"P-`u0fEe5t+j=}Y::Yv2\"><field name=\"NUM\">0</field></shadow></value><next><block type=\"aiot_lcd1602_display\" id=\"|Zb90sIz[ew(qPXd[d]Q\"><value name=\"string\"><shadow type=\"text\" id=\"D|CRKy*k,d.qc-.lS)-b\"><field name=\"TEXT\">Hello</field></shadow><block type=\"get_time\" id=\"piYU9ey|5@:WHi1.Vaj0\"><field name=\"get_time\">5</field></block></value><value name=\"X\"><shadow type=\"math_number\" id=\"Xk}fcXw6ab_ej5htDlU8\"><field name=\"NUM\">4</field></shadow></value><value name=\"Y\"><shadow type=\"math_number\" id=\"EYrW|(F,]L%BMkH2EQ$0\"><field name=\"NUM\">0</field></shadow></value><next><block type=\"aiot_lcd1602_display\" id=\"Ya|}*f^o5*MG]afJ/M4^\"><value name=\"string\"><shadow type=\"text\" id=\"Jf)]UJdmVF8ykqSu|7bY\"><field name=\"TEXT\">Hello</field></shadow><block type=\"get_time\" id=\"A:IKr$IjhUNAZDjX83yi\"><field name=\"get_time\">6</field></block></value><value name=\"X\"><shadow type=\"math_number\" id=\"w$]7gKjqo4x++~8w8!gI\"><field name=\"NUM\">8</field></shadow></value><value name=\"Y\"><shadow type=\"math_number\" id=\"Bpj1SJWpomw_*x$CHUK^\"><field name=\"NUM\">0</field></shadow></value><next><block type=\"aiot_lcd1602_display\" id=\"Q@i.ow4e_9N,0U}~tO[)\"><value name=\"string\"><shadow type=\"text\" id=\"~3^~?Bu-;l4`(J]H6Q]x\"><field name=\"TEXT\">Hello</field></shadow><block type=\"aiot_dht_read\" id=\"rxp{)Y]u#S%1`zqg4XG%\"><field name=\"DATA\">TEMP</field></block></value><value name=\"X\"><shadow type=\"math_number\" id=\"w6xyJf}J17_y(=)^`xHl\"><field name=\"NUM\">0</field></shadow></value><value name=\"Y\"><shadow type=\"math_number\" id=\"@n@eC|{x^$gNQWsUIg89\"><field name=\"NUM\">1</field></shadow></value><next><block type=\"yolobit_events_run\" id=\"x6Dhg1F1+NHB9?}hSrYS\"><next><block type=\"yolobit_basic_sleep\" id=\"sOPW4+@emetQ2y7f%uVx\"><value name=\"duration\"><shadow type=\"math_number\" id=\"Z[X8T|oKROL.Mp-S[9Xj\"><field name=\"NUM\">500</field></shadow></value></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type=\"aiot_ir_on_receive\" id=\"UfH(._;#RA5i.;hTd1[l\" disabled=\"true\" x=\"-388\" y=\"112\"><field name=\"pin\">pin1</field><field name=\"message\" id=\")Ke}[z[[8q2ddvML~!b)\">gio</field><statement name=\"ACTION\"><block type=\"controls_if\" id=\"SX*HVm?e)1M_aR*iB/=?\"><value name=\"IF0\"><block type=\"aiot_ir_recv\" id=\"S98j$.Otm~7b+8DxOm{a\"><field name=\"pin\">pin1</field><field name=\"remote\">A</field></block></value><statement name=\"DO0\"><block type=\"aiot_lcd1602_display\" id=\"T^}A,A]|~mo?e{?3VfM;\"><value name=\"string\"><shadow type=\"text\" id=\"kBT8QcQjdSht.nQ;6BB9\"><field name=\"TEXT\">A</field></shadow></value><value name=\"X\"><shadow type=\"math_number\" id=\"AFTZtbZ[zFXvxn=IJd7?\"><field name=\"NUM\">0</field></shadow></value><value name=\"Y\"><shadow type=\"math_number\" id=\"-AB;IyT}xH(pxz+8U[Mz\"><field name=\"NUM\">0</field></shadow></value></block></statement><next><block type=\"controls_if\" id=\"}g4GAMVW5No%XJ*3[WlB\"><value name=\"IF0\"><block type=\"aiot_ir_recv\" id=\"B)HMH)s+ls@4{#q3?3({\"><field name=\"pin\">pin1</field><field name=\"remote\">B</field></block></value><statement name=\"DO0\"><block type=\"aiot_lcd1602_display\" id=\"gQLCF;]-EUZe;|T|HuOP\"><value name=\"string\"><shadow type=\"text\" id=\";?bYd#2!+!~gX?13Tv5a\"><field name=\"TEXT\">B</field></shadow></value><value name=\"X\"><shadow type=\"math_number\" id=\"o~3O9BT0ycg,}Aqo{NSV\"><field name=\"NUM\">0</field></shadow></value><value name=\"Y\"><shadow type=\"math_number\" id=\"IsCDU#~v%!h/[OOCfzx-\"><field name=\"NUM\">0</field></shadow></value></block></statement></block></next></block></statement></block></xml>","python":"from event_manager import *\nfrom mqtt import *\nfrom machine import Pin, SoftI2C\nfrom aiot_dht20 import DHT20\nfrom yolobit import *\nbutton_a.on_pressed = None\nbutton_b.on_pressed = None\nbutton_a.on_pressed_ab = button_b.on_pressed_ab = -1\nfrom aiot_lcd1602 import LCD1602\nfrom wifi import __wifi__\nfrom machine import RTC\nimport ntptime\nimport time\n\nevent_manager.reset()\n\naiot_dht20 = DHT20(SoftI2C(scl=Pin(22), sda=Pin(21)))\n\ndef on_event_timer_callback_K_y_k_b_m():\n  global gio, den, quat, tin_nhan\n  mqtt.publish('cambien1', (aiot_dht20.dht20_temperature()))\n  mqtt.publish('cambien2', (round(translate((pin2.read_analog()), 0, 4095, 0, 100))))\n  mqtt.publish('cambien3', (round(translate((pin0.read_analog()), 0, 4095, 0, 100))))\n\nevent_manager.add_timer_event(20000, on_event_timer_callback_K_y_k_b_m)\n\naiot_lcd1602 = LCD1602()\n\ndef on_mqtt_message_receive_callback__button1_(den):\n  global gio, quat, tin_nhan\n  if den == '1':\n    display.set_all('#ff0000')\n    aiot_lcd1602.move_to(5, 1)\n    aiot_lcd1602.putstr('Bat den')\n  else:\n    display.set_all('#000000')\n    aiot_lcd1602.move_to(5, 1)\n    aiot_lcd1602.putstr('Tat den')\n\ndef on_mqtt_message_receive_callback__button2_(quat):\n  global gio, den, tin_nhan\n  pin10.write_analog(round(translate(((int(quat)) * 33.33), 0, 100, 0, 1023)))\n  if quat == '0':\n    aiot_lcd1602.move_to(5, 1)\n    aiot_lcd1602.putstr('Tat quat')\n  else:\n    aiot_lcd1602.move_to(5, 1)\n    aiot_lcd1602.putstr('Bat quat')\n\ndef on_mqtt_message_receive_callback__topic_(tin_nhan):\n  global gio, den, quat\n  pass\n\n# Mô tả hàm này...\ndef Sever():\n  global gio, den, quat, tin_nhan, aiot_ir_rx, aiot_dht20, aiot_lcd1602\n  mqtt.on_receive_message('button1', on_mqtt_message_receive_callback__button1_)\n  mqtt.on_receive_message('button2', on_mqtt_message_receive_callback__button2_)\n  mqtt.on_receive_message('topic', on_mqtt_message_receive_callback__topic_)\n\nif True:\n  __wifi__.connect_wifi('thanhliem', 'liemnguyen')\n  ntptime.settime()\n  (year, month, mday, week_of_year, hour, minute, second, milisecond) = RTC().datetime()\n  RTC().init((year, month, mday, week_of_year, hour+7, minute, second, milisecond))\n  mqtt.connect_wifi('thanhliem', 'liemnguyen')\n  mqtt.connect_broker(server='io.adafruit.com', port=1883, username='thanhliemtala', password='aio_gyUv68VsDq0FC34RFu99SsYdcfEz')\n  display.scroll('OK')\n  aiot_lcd1602.backlight_on()\n  mqtt.check_message()\n  Sever()\n\nwhile True:\n  mqtt.check_message()\n  aiot_dht20.read_dht20()\n  aiot_lcd1602.move_to(0, 0)\n  aiot_lcd1602.putstr(('%0*d' % (2, RTC().datetime()[4])))\n  aiot_lcd1602.move_to(4, 0)\n  aiot_lcd1602.putstr(('%0*d' % (2, RTC().datetime()[5])))\n  aiot_lcd1602.move_to(8, 0)\n  aiot_lcd1602.putstr(('%0*d' % (2, RTC().datetime()[6])))\n  aiot_lcd1602.move_to(0, 1)\n  aiot_lcd1602.putstr((aiot_dht20.dht20_temperature()))\n  event_manager.run()\n  time.sleep_ms(500)\n","name":"XinChao","extensions":[{"id":"yolobit-AITT-VN-yolobit_ntp","src":"https://github.com/AITT-VN/yolobit_ntp","name":"NTP","description":"Mục mở rộng hỗ trợ đọc thời gian từ Internet qua giao thức NTP (Network Time Protocol)"},{"id":"yolobit-AITT-VN-yolobit_extension_aiot","src":"https://github.com/AITT-VN/yolobit_extension_aiot","name":"AIOT Kit","description":"Mục mở rộng dành cho bộ kit AIoT"},{"id":"yolobit-AITT-VN-yolobit_extension_mqtt","src":"https://github.com/AITT-VN/yolobit_extension_mqtt","name":"MQTT","description":"Mục mở rộng hỗ trợ giao tiếp MQTT cho ứng dụng IoT"},{"id":"yolobit-AITT-VN-yolobit_extension_events","src":"https://github.com/AITT-VN/yolobit_extension_events","name":"SỰ KIỆN","description":"Mục mở rộng hỗ trợ sử dụng sự kiện trong chương trình"}],"device":"yolobit"}